let express,getInstagramCount,getTwitterCount,db;_ed9‍.w("express",[["default",["express"],function(v){express=v}]]);_ed9‍.w("./lib/scraper",[["getInstagramCount",["getInstagramCount"],function(v){getInstagramCount=v}],["getTwitterCount",["getTwitterCount"],function(v){getTwitterCount=v}]]);_ed9‍.w("./lib/db",[["default",["db"],function(v){db=v}]]);







const app = express();

app.get('/scrape', async(req, res, next) => {
    console.log('scraping');
    const [ iCount, tCount ] = await Promise.all([
        getInstagramCount(),
        getTwitterCount()
    ]);

    _ed9‍.g.console.log(iCount, tCount);

    db.get('twitter')
      .push({
        date: Date.now(),
        count: tCount,
      })
    db.get('instagram')
      .push({
        date: Date.now(),
        count: iCount,
      })
    .write();
    res.json({ iCount, tCount });
});
